<html>

<!--
=== UCSF ChimeraX Copyright ===
Copyright 2016 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  For details see:
http://www.rbvi.ucsf.edu/chimerax/docs/licensing.html
This notice must be embedded in or attached to all copies,
including partial copies, of the software or any revisions
or derivations thereof.
=== UCSF ChimeraX Copyright ===
-->

<head>
<link rel="stylesheet" type="text/css" href="../userdocs.css" />
<title>Command: device, vr</title>
</head><body>

<a name="top"></a>
<a href="../index.html">
<img width="60px" src="../ChimeraX-docs-icon.svg" alt="ChimeraX docs icon"
class="clRight" title="User Guide Index"/></a>

<h3><a href="../index.html#commands">Command</a>: device, vr</h3>

<h3 class="usage"><a href="usageconventions.html">Usage</a>:
<br><b>device</b> &nbsp;<i>device-type</i> [&nbsp;<i>status</i>&nbsp;] 
&nbsp;<i>device-options</i>
</h3>
<p>
The <b>device</b> command sets modes for certain external devices, 
where the <i>device-type</i> can be:
</p>
<ul>
<li><a href="#snav"><b>snav</b></a> 
- SpaceNavigator<sup>&reg;</sup> 3D mouse
<li><a href="#vr"><b>vr</b></a>
- HTC Vive, Oculus Rift virtual reality systems
</ul>
<p>
<a name="status"></a>
The <i>status</i> of a mode can be 
<b>on</b> (synonyms <b>true</b>, <b>True</b>, <b>1</b>)
or <b>off</b> (synonyms <b>false</b>, <b>False</b>, <b>0</b>).
Device-specific options are described below.
</p>

<a href="#top" class="nounder">&bull;</a>
<a name="snav"><b>device snav</b></a>
[&nbsp;<a href="#status"><i>status</i></a>&nbsp;]
[&nbsp;<b>fly</b>&nbsp;&nbsp;true&nbsp;|&nbsp;<b>false</b>&nbsp;]
[&nbsp;<b>speed</b>&nbsp;&nbsp;<i>factor</i>&nbsp;]
<blockquote>
<p>
The command <b>device snav</b> enables manipulation 
with a SpaceNavigator<sup>&reg;</sup> 3D mouse from
<a href="http://www.3dconnexion.com/" target="_blank">3Dconnexion</a>.
The <b>fly</b> option indicates whether the force applied to the device 
should be interpreted as acting on the camera (<b>true</b>), where
pushing forward zooms in because it moves the camera viewpoint toward the scene,
or as acting on the models in the scene (<b>false</b>, default), where
pushing forward zooms out because it pushes the models away.
In either case, however, it is the camera that actually moves.
The <b>speed</b> option sets a sensitivity <i>factor</i> for motion
relative to the device (default <b>1.0</b>).
Decreasing the value (for example, to 0.1) reduces sensitivity to give
slower motion, whereas increasing the value has the opposite effect.
See also: <a href="ui.html#mousemode"><b>mousemode</b></a>
</p>
</blockquote>

<a href="#top" class="nounder">&bull;</a>
<a name="vr"><b>vr</b></a> [&nbsp;<a href="#status"><i>status</i></a>&nbsp;]
[&nbsp;<b>display</b>&nbsp;&nbsp;<b>mirror</b>&nbsp;|&nbsp;independent&nbsp;|&nbsp;blank&nbsp;]
[&nbsp;<b>showControllers</b>&nbsp;&nbsp;<b>true</b>&nbsp;|&nbsp;false&nbsp;]
[&nbsp;<b>clickRange</b>&nbsp;&nbsp;<i>r</i>&nbsp;]
[&nbsp;<b>toolbarPanels</b>&nbsp;&nbsp;<b>true</b>&nbsp;|&nbsp;false&nbsp;]
[&nbsp;<b>simplifyGraphics</b>&nbsp;&nbsp;<b>true</b>&nbsp;|&nbsp;false&nbsp;]
[&nbsp;<b>multishadowAllowed</b>&nbsp;&nbsp;true&nbsp;|&nbsp;<b>false</b>&nbsp;]
[&nbsp;<b>roomPosition</b>&nbsp;&nbsp;<i>matrix</i>&nbsp;|&nbsp;<b>report</b>&nbsp;]
[&nbsp;<b>icons</b>&nbsp;&nbsp;true&nbsp;|&nbsp;<b>false</b>&nbsp;]
<blockquote>
<p>
The <b>vr</b> command (same as <b>device vr</b>)
enables a virtual reality mode for HTC Vive and Oculus Rift systems.
The mode uses <a href="http://store.steampowered.com/about/"
target="_blank">SteamVR</a>, which must be installed separately by the user
and started before the mode is enabled.
In addition, Oculus Rift users should start the Oculus runtime 
before starting SteamVR. For details and related issues, 
see <a href="../vr.html">ChimeraX virtual reality</a>.
See also: <a href="camera.html"><b>camera</b></a>,
<a href="view.html"><b>view</b></a>,
<a href="meeting.html"><b>meeting</b></a>,
<a href="../movies.html">making movies</a>
<p>
The <b>display</b> option indicates what to show in the ChimeraX graphics
window on the desktop:
<ul>
<li><b>mirror</b> (default) - the right-eye view seen in the VR headset
<li><b>independent</b> - a separate camera view
fixed in the VR room coordinates, set to match the viewpoint of
the VR headset when the command is issued
<li><b>blank</b> - no graphics, allowing all graphics computing
resources to be dedicated to VR headset rendering
</ul>
Updating the graphics window can cause flicker in the VR headset
because refreshing the computer display (nominally 60 times per second)
slows rendering to headset. ChimeraX turns off syncing to
vertical refresh if possible. Another way to mirror is to use
SteamVR's menu entry to display mirror window.
</p><p>
The <b>showControllers</b> option (default <b>true</b>)
shows representations of the hand controllers in the scene.
Not showing the representations may be useful to avoid time-consuming
calculations of the shadows they cast. 
<p><p>
The <b>clickRange</b> option sets the depth range for
picking objects with the hand-controller cones, where <i>r</i>
(default <b>5.0</b>) is the maximum distance from the tip of the cone 
to the object in scene distance units, typically &Aring;.
Limiting the range prevents accidentally picking far-away objects.
</p><p>
The <b>toolbarPanels</b> option (default <b>true</b>)
indicates whether to hide icon toolbars
(<a href="../tools/mousemodes.html"><b>Mouse Modes for Right Button</b></a>,
<a href="../tools/moldisplay.html"><b>Molecule Display Toolbar</b></a>, 
<i>etc.</i>) and instead show them as tool panels.
This is useful for consolidating the controls in VR.
</p><p>
The <b>simplifyGraphics</b> option (default <b>true</b>)
reduces the maximum level of detail in VR by limiting the 
total atom and bond triangles to one million each.
This helps to maintain full rendering speed. The previous total-triangle 
limits are restored when the VR mode is turned off. Normally,
the maximum atom and bond triangles are set to five million each.
See also: <a href="graphics.html"><b>graphics</b></a>
</p><p>
Ambient shadowing or &ldquo;ambient occlusion&rdquo;
requires calculating shadows from multiple directions,
which may make rendering too slow for VR and cause stuttering in the headset.
By default (<b>multishadowAllowed</b> &nbsp;<b>false</b>),
if the <a href="lighting.html#multiShadow"><b>multiShadow</b></a>
lighting parameter is &gt; 0, enabling VR switches to the
<a href="lighting.html#preset"><b>simple</b></a> lighting mode.
With <b>multishadowAllowed</b> &nbsp;<b>true</b>, 
the lighting mode is left unchanged.
</p><p>
When the mode is enabled, the <b>roomPosition</b> option can be used to
specify the transformation between room coordinates (in meters, 
with origin at room center) and scene coordinates (typically in &Aring;)
or to simply <b>report</b> the current transformation
in the <a href="../tools/log.html"><b>Log</b></a>.
The transformation <i>matrix</i> is given as
12 numbers separated by commas only, corresponding to a 3x3 matrix 
for rotation and scaling, with a translation vector in the fourth column.
Ordering is row-by-row, such that the translation vector is given as 
the fourth, eighth, and twelfth numbers. Example:
</p>
<blockquote>
<b>vr &nbsp;room &nbsp;20,0,0,0,0,20,0,0,0,0,20,0</b>
</blockquote>
</p><p>
The <b>icons</b> option (default <b>false</b>) indicates whether 
to show a panel of icons when the controller trackpad is touched.
This user interface is deprecated, replaced by pressing the hand controller
menu button which shows the standard ChimeraX user interface in VR.
</p>
</blockquote>

<hr>
<address>UCSF Resource for Biocomputing, Visualization, and Informatics / 
September 2018</address>
</body></html>
