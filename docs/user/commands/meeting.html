<html>

<!--
=== UCSF ChimeraX Copyright ===
Copyright 2016 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  For details see:
http://www.rbvi.ucsf.edu/chimerax/docs/licensing.html
This notice must be embedded in or attached to all copies,
including partial copies, of the software or any revisions
or derivations thereof.
=== UCSF ChimeraX Copyright ===
-->

<head>
<link rel="stylesheet" type="text/css" href="../userdocs.css" />
<title>Command: meeting</title>
</head><body>

<a name="top"></a>
<a href="../index.html">
<img width="60px" src="../ChimeraX-docs-icon.svg" alt="ChimeraX docs icon"
class="clRight" title="User Guide Index"/></a>

<h3><a href="../index.html#commands">Command</a>: meeting</h3>

<h3 class="usage"><a href="usageconventions.html">Usage</a>:
<br><b>meeting</b> &nbsp;<b>start</b>&nbsp;
[&nbsp;<b>name</b>&nbsp;&nbsp;<i>participant-name</i>&nbsp;] 
[&nbsp;<b>color</b>&nbsp;&nbsp;<a href="colornames.html"><i>pointer-color</i></a>&nbsp;] 
[&nbsp;<b>faceImage</b>&nbsp;&nbsp;<i>image-file</i>&nbsp;] 
<span class="nowrap">&nbsp;<a href="#options"><i>other-options</i></a></a>
</h3>
<h3 class="usage"><a href="usageconventions.html">Usage</a>:
<br><b>meeting</b> &nbsp;<i>host</i>&nbsp;
[&nbsp;<b>name</b>&nbsp;&nbsp;<i>participant-name</i>&nbsp;] 
[&nbsp;<b>color</b>&nbsp;&nbsp;<a href="colornames.html"><i>pointer-color</i></a>&nbsp;] 
[&nbsp;<b>faceImage</b>&nbsp;&nbsp;<i>image-file</i>&nbsp;] 
<span class="nowrap">&nbsp;<a href="#options"><i>other-options</i></a></a>
</h3>
<h3 class="usage"><a href="usageconventions.html">Usage</a>:
<br><b>meeting</b> &nbsp;<b>send</b>
</h3>
<h3 class="usage"><a href="usageconventions.html">Usage</a>:
<br><b>meeting</b> &nbsp;<b>close</b>
</h3>
<p>
The <b>meeting</b> command shares a scene between
two or more ChimeraX instances running on different computers.
Its main purpose is to allow multi-person
<a href="../vr.html">virtual reality</a> (VR) sessions in ChimeraX, 
although it can also be used without VR. 
Each participant is represented by an image and 
hand-controller pointers (or if not using VR, the mouse pointer)
so that participants can see each other pointing at objects in the scene.
</p><p>
A <a href="#limitations">limitation</a> is that the hub server is run
on the initiator's local host, which may not be reachable through participants'
firewalls.
The related command <a href="conference.html"><b>conference</b></a>
(or <a href="../tools/conferencecall.html"><b>Conference Call</b></a> tool)
is under development to allow using a publicly accessible address/port 
to run the hub server instead, but is not yet working.
See also: <a href="device.html#vr"><b>vr</b></a>
</p><p>
The meeting is initiated with <b>meeting start</b>, which reports the 
hostname and IP address in the <a href="../tools/log.html"><b>Log</b></a>.
Subsequently, others join using <b>meeting</b> <i>host</i>,
where <i>host</i> is the hostname or IP address of the starting instance
(<i>e.g.</i>, <b>descartes.cgl.ucsf.edu</b> or <b>169.230.21.39</b>).
</p><p>
Each participant can specify a <b>name</b> to serve as an identifier 
within the shared environment, a <b>faceImage</b> file, 
and a pointer-cone <b>color</b>.
</p><p>
Aside from synchronizing pointers, the <b>meeting</b> command will 
<a href="#options">copy</a>
a session from the ChimeraX instance that initiates the meeting 
to each person who joins the meeting.
This copying is done only when a person joins the meeting. 
Commands executed by one participant will automatically execute for the others
(by <a href="#relayCommands">default</a>),
and if a participant using VR moves the scene,
others using VR will see the motion.
Participants not using VR maintain their own viewing directions.
If unshared changes have been made, a participant can still share 
his current scene with the others by using <b>meeting send</b>.
The host can end the meeting with <b>meeting close</b>, or
others can use it to exit the meeting individually.
</p><p>
The <b>meeting</b> command is under development 
and has several <a href="#limitations">limitations</a>.
</p>

<a name="options"></a>
<p class="nav">
[<a href="#top">back to top: meeting</a>]
</p>
<h3>Options</h3>

<blockquote>
<b>name</b>&nbsp;&nbsp;<i>participant-name</i>
<br>
Name to show for a participant's pointer and image models
in the <a href="../tools/modelpanel.html"><b>Model Panel</b></a>.
</blockquote>
<blockquote>
<b>color</b>&nbsp;&nbsp;<a href="colornames.html"><i>pointer-color</i></a>
<br>
Color for the cones representing a VR participant's hand-controller pointers
(or non-VR participant's mouse pointer).
</blockquote>
<blockquote>
<b>faceImage</b>&nbsp;&nbsp;<i>image-file</i>
<br>
Image to represent a VR participant's headset position,
where <i>image-file</i> is the pathname of a JPG or PNG file.
The pathname can be absolute or relative to the current working directory as
reported by <a href="pwd.html"><b>pwd</b></a>,
Substituting the word <a href="usageconventions.html#browse"><b>browse</b></a>
for the pathname brings up a file browser window for choosing the
file interactively.
</blockquote>

<blockquote>
<b>copyScene</b> &nbsp;<b>true</b>&nbsp;|&nbsp;false
<br>
Specified with <b>meeting start</b>,
whether to copy the session from the starting instance
to each person who joins the meeting (default <b>true</b>).
This copying is done only when a person joins the meeting. 
</blockquote>
<blockquote>
<a name="relayCommands"></a>
<b>relayCommands</b> &nbsp;<b>true</b>&nbsp;|&nbsp;false
<br>
Whether to share <a href="../index.html#commands">commands</a>
with other participants, and in turn, execute other participants' commands 
automatically (default <b>true</b>).
Note that <a href="../index.html#toolbars">toolbar</a> icon buttons and many 
<a href="ui.html#mousemode">mouseclick/pointer operations</a> act via commands.
</blockquote>
<blockquote>
<b>port</b>&nbsp;&nbsp;<i>N</i>
<br>
Number of the network port used to connect to the meeting host
(default <b>52194</b>). Unless the default is used,
all who join the meeting must specify the same number 
as specified with <b>meeting start</b>.
</blockquote>
<blockquote>
<b>updateInterval</b>&nbsp;&nbsp;<i>M</i>
<br>
How often to send a participant's
VR headset and hand-controller positions to the other participants
(every <i>M</i><sup>th</sup> frame, default <b>1</b>, every frame).
For non-VR users, the mouse pointer is not tracked continuously;
the position is only displayed to others when it hovers over an atom.
</blockquote>

<a name="limitations"></a>
<p class="nav">
[<a href="#top">back to top: meeting</a>]
</p>
<h3>Limitations and Potential Developments</h3>
<p>
<b>Firewalls block connections.</b>
Most academic institutions have firewalls that block incoming network 
connections, and require administrative requests to open up network ports.
Whereas the <b>meeting</b> command only allows running the hub
server on the initiator's local host (and is thus susceptible to being
blocked by participants' firewalls), the
<a href="conference.html"><b>conference</b></a> command
is being developed to allow using a publicly accessible address/port instead.
However,
the <a href="conference.html"><b>conference</b></a> command is not yet working.
<!--
To allow this to scale to hundreds of instances running simultaneously,
ChimeraX could start a cloud-based server on demand using a commercial service
that accepts the connections and forwards changes to all participants. 
However, this is a complex undertaking that would require 
accounts and payment for commercial services.
Currently, the
<a href="http://www.cgl.ucsf.edu/Overview/index.html" target="_blank">UCSF
RBVI</a> is providing a hub server for use with the
<a href="conference.html"><b>conference</b></a> command at:
<b>cxconference.rbvi.ucsf.edu:443</b>
-->
</p>

<p>
<b>Synchronizing changes.</b>
After the initial scene is shared not all changes made by one participant will
be propagated to other participants. Changes that are propagated include 
moving and scaling the displayed structures and
(by <a href="#relayCommands">default</a>) 
executing <a href="../index.html#commands">commands</a>.
If a participant makes any unshared changes or
introduces data for which the input file is not directly accessible 
to others (<i>i.e.</i>, the same <a href="open.html"><b>open</b></a>
command will not work for everyone), <b>meeting send</b> 
is needed to share the updated session.
This may be slow for large amounts of data.
</p>

<p>
<b>More than two participants.</b>
The meeting command has had very limited testing with more than two
participants. Multiple participants may cause errors or slow display updating.
</p>

<p>
<b>No audio chat support.</b>
An audio connection is not provided,
so it is necessary to set up a separate audio link for remote participants.
</p>

<p>
<b>Aligning two VR headsets in one room.</b>
Two Vive or Vive Pro VR headsets can be used in the same room, each connected
to its own computer. Each headset uses the same pair of base stations.
A problem sometimes arises that the two headsets do not see the 
ChimeraX structures displayed at the same location in the room.
Specifically, one headset may see the structure positions 
as if the room is rotated 180&deg; relative to the other headset.
This happens because the SteamVR room setup is run separately on each computer
and produces a different coordinate system. For structures to have the same
room position in both headsets, the room boundaries traced using SteamVR room
setup should be the same for both computers. The first step of SteamVR room
setup in which users are asked to point the hand controller at the screen 
and click is the key to avoiding 180&deg; misorientation. At that step, it
is important to point along the short axis of the 
rectangle defining the room bounds (that will be traced in a later step).
SteamVR chooses between two coordinate system orientations
rotated 180&deg; from each other based on the direction of pointing.
If pointing is along the long axis of the rectangle bounds, a slight tilt 
toward the left or right of the long axis produces opposite coordinate 
system orientations. Pointing along the short axis instead is a reliable
way to make both computers use the same orientation.
(The computer screen position is irrelevant.)
</p>

<hr>
<address>UCSF Resource for Biocomputing, Visualization, and Informatics / 
July 2020</address>
</body></html>
