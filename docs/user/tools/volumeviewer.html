<html>

<!--
=== UCSF ChimeraX Copyright ===
Copyright 2016 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  For details see:
http://www.rbvi.ucsf.edu/chimerax/docs/licensing.html
This notice must be embedded in or attached to all copies,
including partial copies, of the software or any revisions
or derivations thereof.
=== UCSF ChimeraX Copyright ===
-->

<head>
<link rel="stylesheet" type="text/css" href="../userdocs.css" />
<title>Tool: Volume Viewer</title>
</head><body>

<a name="top"></a>
<a href="../index.html">
<img width="60px" src="../ChimeraX-docs-icon.svg" alt="ChimeraX docs icon"
class="clRight" title="User Guide Index"/></a>

<h3><a href="../index.html#tools">Tool</a>: Volume Viewer</h3>
<p>
<b><i>Volume data</i></b> is a broad term for
density maps, electrostatic potential maps, 3D imaging data, and other 
data sets with numerical values associated with points on a 3D grid.
Volume data can be <a href="#multichannel">multichannel</a> and/or
<a href="../trajectories.html#vseries">time series</a>.
Volume data can be opened with the command
<a href="../commands/open.html"><b>open</b></a>
(which automatically starts <b>Volume Viewer</b>) and saved to a file with 
<a href="../commands/save.html"><b>save</b></a>.
</p>
<table class="clRight">
<tr><td>
<a href="3eebB-dx-screenshot.png">
<img class="outline" src="3eebB-dx-screenshot.png" title="click to enlarge..."
alt="3eebB ESP isosurfaces" width="700px"></a></td></tr>
</table>
<p>
<b>Volume Viewer</b> is a graphical interface for adjusting contour levels
and other aspects of volume data display.
Alternatively, these settings and more can be adjusted with the 
<a href="../commands/volume.html"><b>volume</b></a> command.
</p><p>
See also:
<a href="toolbar.html"><b>Toolbar</b></a>,
<a href="mapcoords.html"><b>Map Coordinates</b></a>,
<a href="fitmap.html"><b>Fit in Map</b></a>,
<a href="segment.html"><b>Segment Map</b></a>,
<a href="fitsegments.html"><b>Fit to Segments</b></a>,
<a href="maperaser.html"><b>Map Eraser</b></a>,
<a href="measureblobs.html"><b>Measure and Color Blobs</b></a>,
<a href="measurevolume.html"><b>Measure Volume and Area</b></a>,
<a href="mapstats.html"><b>Map Statistics</b></a>,
<a href="markerplacement.html"><b>Marker Placement</b></a>,
<a href="colorzone.html"><b>Color Zone</b></a>,
<a href="surfacezone.html"><b>Surface Zone</b></a>,
<a href="hidedust.html"><b>Hide Dust</b></a>,
<a href="../commands/show.html"><b>show</b></a>,
<a href="../commands/color.html"><b>color</b></a>,
<a href="../commands/transparency.html"><b>transparency</b></a>,
<a href="../commands/vseries.html"><b>vseries</b></a>,
<a href="../commands/molmap.html"><b>molmap</b></a>,
<a href="../commands/surface.html#sop"><b>surface</b> operations</a>,
<a href="../commands/volume.html#vop"><b>volume</b> operations</a>,
<a href="../measurements.html">measurements</a>,
<a href="../dicom-quickref.html">ChimeraX DICOM Reference</a>
</p><p>
Even without data, <b>Volume Viewer</b> can be started
from the <b>Volume Data</b> section of the <b>Tools</b> menu.
The <b>Volume Viewer</b> window can be manipulated
like other panels in ChimeraX (<a href="../window.html#panels">more...</a>).
</p><p>
By default, a data set will be displayed automatically if it does not
exceed a certain size
(<a href="../commands/volume.html"><b>volume</b></a> command option
<a href="../commands/volume.html#dispopen"><b>showOnOpen</b></a>), 
although it may be subsampled
(<a href="../commands/volume.html"><b>volume</b></a> command option
<a href="../commands/volume.html#autostep"><b>limitVoxelCount</b></a>).
</p><p>
A histogram of values with moveable <a href="#threshold">thresholds</a>
(contour levels) is shown for each data set.
Above the histogram are:
</p>
<ul>
<li>the model name 
<li>an <b>eye icon</b> for showing/hiding the model
<li>a color well (that can be clicked to change the color interactively)
for the <a href="#threshold">threshold</a> most recently moved or clicked
<br>(to recolor all of a model's <a href="#threshold">thresholds</a>
at once, instead use
its color well in the <a href="modelpanel.html"><b>Model Panel</b></a>,
or the <a href="../commands/volume.html"><b>volume</b></a> command)
<li>the model number
<li>dimensions in grid units of the <a href="#region">display region</a>
<li>the <a href="#step">step size</a> (subsampling)
<li>the level of the <a href="#threshold">threshold</a>
most recently moved or clicked
<li>the range of values in the <a href="#region">display region</a>
<li>a pulldown menu with display settings:
  <ul>
  <li><b>surface</b> &ndash; solid isosurfaces, the
  <b>surface</b> <a href="../commands/volume.html#style">display style</a>
(default for most types of data) 
  <li><b>mesh</b>
  &ndash; mesh isosurfaces,
  the <b>mesh</b> <a href="../commands/volume.html#style">display style</a>
  <li><b>volume</b> &ndash; cloudlike with varying intensity and opacity, also known
  as the <b>image</b> <a href="../commands/volume.html#style">display style</a>
  <li><b>maximum</b>
&ndash; image style,
 <a href="../commands/volume.html#maximumintensity">maximum intensity projection</a>
  <li><b>plane</b> 
&ndash; image style,
a <a href="../commands/volume.html#planes">single plane</a> perpendicular to Z;
a slider interface is shown below the histogram 
and the right-button <a href="../commands/ui.html#mousemode">mouse mode</a> 
is set to <b>move planes</b> 
    <a href="mousemodes.html" title="Mouse Modes for Right Button...">
    <img class="icon" border=1 src="mouse-icons/moveplanes.png"></a>
    <ul>
    <li>pausing the cursor over a single-plane display shows the voxel indices
    and data value in a pop-up balloon
    <li>planes along X, Y, and/or Z can be displayed and adjusted with the
    <a href="../commands/volume.html"><b>volume</b></a> command or the
    <a href="../commands/ui.html#mousemode">mouse mode</a> for
    <b>move planes</b> 
    <a href="mousemodes.html" title="Mouse Modes for Right Button...">
    <img class="icon" border=1 src="mouse-icons/moveplanes.png"></a>,
    </ul>
  <li><b>orthoplanes</b>
&ndash; image style,
<a href="../commands/volume.html#orthoplanes">XYZ planes</a> simultaneously;
the right-button <a href="../commands/ui.html#mousemode">mouse mode</a> 
is set to <b>move planes</b>
    <a href="mousemodes.html" title="Mouse Modes for Right Button...">
    <img class="icon" border=1 src="mouse-icons/moveplanes.png"></a>
  <li><b>box</b>
&ndash; image style,
 <a href="../commands/volume.html#boxfaces">orthoplanes as six box faces</a>;
the right-button <a href="../commands/ui.html#mousemode">mouse mode</a>
is set to <b>crop volume</b> 
<a href="mousemodes.html" title="Mouse Modes for Right Button...">
<img class="icon" border=1 src="mouse-icons/crop.png"></a>
  <li><b>tilted slab</b>
&ndash; image style,
<a href="../commands/volume.html#tiltedslab">sliced at any angle</a>
relative to the data axes; the slab can be rotated with the
<b>rotate slab</b> <a href="../commands/ui.html#mousemode">mouse mode</a>
    <a href="medicalimage.html#mousemodes" title="Medical Image Toolbar">
    <img class="icon" border=1 src="mouse-icons/rotateslab.png"></a>,
translated along its axis with
either the <b>rotate slab</b> button + <b>Shift</b> or the
<b>move planes</b> <a href="../commands/ui.html#mousemode">mouse mode</a>
    <a href="mousemodes.html" title="Mouse Modes for Right Button...">
    <img class="icon" border=1 src="mouse-icons/moveplanes.png"></a>,
and its thickness (single- or multi-plane) adjusted with the
<b>crop volume</b> <a href="../commands/ui.html#mousemode">mouse mode</a>
    <a href="mousemodes.html" title="Mouse Modes for Right Button...">
    <img class="icon" border=1 src="mouse-icons/crop.png"></a>.
The slab is initially perpendicular to the line of sight
and placed at the center of the current <a href="#region">display region</a>
(<a href="../commands/volume.html#tiltedslab">details...</a>).
  </ul>
<li>a <b>minus-sign button</b> for closing the model
</ul>
<p>
<a name="step"></a>
The <b>step</b> setting controls <b><i>subsampling</i></b>;
a value  of <b>1</b> means all the data points are used
to generate the display, while <b>2</b>
means every other data point is taken along each axis,
reducing the number of points used by a factor of eight.
Step sizes can be different in the X, Y, and Z directions,
although this can only be set with the 
<a href="../commands/volume.html"><b>volume</b></a> command
<a href="../commands/volume.html#sampling"><b>step</b></a> option
(not with the graphical interface).
</p><p>
<a name="region"></a>
The <b><i>display region</i></b> is not necessarily the full extent
of the data grid; it can be limited with the
<a href="../commands/volume.html"><b>volume</b></a> command
<a href="../commands/volume.html#dimensions"><b>region</b></a> option or the
<a href="../commands/ui.html#mousemode">mouse mode</a> for <b>crop volume</b> 
<a href="mousemodes.html" title="Mouse Modes for Right Button...">
<img class="icon" border=1 src="mouse-icons/crop.png"></a>.
</p><p>
<a name="threshold"></a>
The <b><i>thresholds</i></b> on the <a href="#top"><b>Volume Viewer</b></a>
histogram, each associated with a data <b>Level</b>,
control how data values are mapped to the display.
They can be added and deleted using the
<a href="../window.html#context-menu">context menu</a>
and adjusted interactively by dragging in the histogram,
or by dragging in the graphics window with the 
<a href="../commands/ui.html#mousemode">mouse mode</a> for <b>contour level</b>
<a href="mousemodes.html" title="Mouse Modes for Right Button...">
<img class="icon" border=1 src="mouse-icons/contour.png"></a>
or <b>windowing</b> <a href="mousemodes.html#multiwindowing" 
title="Mouse Modes for Right Button...">
<img class="icon" border=1 src="mouse-icons/windowing.png"></a>.
The <a href="../commands/volume.html#settings"><b>volume settings</b></a>
command reports the current threshold levels.
</p>
<blockquote>
For the <b>surface</b> or <b>mesh</b> style:<br>
Each threshold is shown on the histogram as a vertical bar
that can be moved horizontally. 
Each threshold corresponds to a contour surface, generated as a
<a href="modelpanel.html">submodel</a> of the data model.
For most types of volume data, an initial threshold is set so that 1% of voxels
(1% of the data grid points) lie above it.
For data types typically used for electrostatic potential
(APBS, UHBD, DelPhi) or electron localization (Gaussian, gOpenMol),
two initial thresholds are placed symmetrically about zero.
</blockquote>
<blockquote>
For the <b>volume</b> (<b>image</b>) style:<br>
Each threshold is shown as a small square that can be moved horizontally
and/or vertically. 
The thresholds and connecting lines on each histogram define a 
<a href="../commands/volume.html#transferfunction">transfer function</a>
that maps data values to colors and intensities.
For most types of volume data, three initial thresholds are set: 
zero intensity at the 10% rank value, 0.8 intensity at 99% rank, 
and full intensity at the largest value.
<a href="../dicom/dicom.html">DICOM</a> data are initially shown 
with thresholds: (&ndash;1000,0),(300,0.9),(3000,1).
For data types typically used for electrostatic potential
(APBS, UHBD, DelPhi) or electron localization (Gaussian, gOpenMol),
five initial thresholds are set: zero intensity at zero
and two more on either side, ramping up to full intensities at the 
largest negative and largest positive values. The image representation is a
<a href="modelpanel.html">submodel</a> of the data model.
Initial threshold positions for the image style can be restored by clicking the
<a href="medicalimage.html"><b>Medical Image</b></a> icon
<img class="icon" src="shortcut-icons/initialcurve.png">.
</blockquote>
<a name="context"></a>
<p>
The <b>Volume Viewer</b> <a href="../window.html#context-menu">context menu</a>
includes:
<ul>
<li><b>Show Outline Box</b>
&ndash; toggle <a href="../commands/volume.html#outline">outline box</a>
<li><b>Show Full Region</b>
&ndash; show the entire <a href="#region">region</a> (instead of a subregion or 
a <a href="../commands/volume.html#planes">single plane</a>)
<li><b>New Threshold</b>
<li><b>Delete Threshold</b>
</ul>
Each threshold is shown in the same color as its display.
The color and level shown above the histogram apply
to the threshold most recently moved or clicked.
The color, including opacity, can be changed by clicking the 
color square and using the resulting color chooser.
The level can be changed by entering a different value 
or by dragging the threshold.
Holding the Shift key down reduces the speed (mouse sensitivity) of threshold
dragging tenfold, allowing finer control.
</p><p>
Histogram ranges and threshold levels are given in the same units as the
data. The <a href="../commands/volume.html"><b>volume</b></a>
command also allows specifying threshold levels in units of
root-mean-square deviations from zero or standard deviations from the mean.
</p>

<a name="multichannel"></a>
<p class="nav">
[<a href="#top">back to top: Volume Viewer</a>]
</p>
<h3>Multichannel Data</h3>
<p>
When multiple maps are specified in a single 
<a href="../commands/open.html"><b>open</b></a> command 
(multiple files specified with wild cards or globbing), 
channel numbers are <a href="../commands/open.html#channel">discerned</a>
from the filenames, if possible.
Multiple channels can also be read from a single file (OME TIFF and 
certain other <a href="../commands/open.html#volume">volume formats</a>).
Alternatively, multiple maps that are already open as independent data sets
can be grouped into a single multichannel data set using the
<a href="../commands/volume.html#channels"><b>volume channels</b></a> command,
as long as the maps are the same size (have the same
numbers of points in each dimension).
</p><p>
Channels of a single multichannel data set are synchronized,
in that changing the display style, step size, crop boundaries,
or display plane of one channel in the <b>Volume Viewer</b> interface
or <a href="../commands/ui.html#mousemode">with the mouse</a>
changes it for all of the channels in the group.
The <a href="../commands/volume.html"><b>volume</b></a> command
allows changing settings for individual channels.
</p><p>
Color blending of multichannel data in the
<b>image</b> <a href="../commands/volume.html#style">display style</a>
can be done <a href="../commands/volume.html#blendOnGpu">on the GPU</a>.
</p><p>
See also:
the <a href="https://www.rbvi.ucsf.edu/chimerax/features.html#multichannel"
target="_blank">ChimeraX light microscopy highlight</a>
</p>

<hr>
<address>UCSF Resource for Biocomputing, Visualization, and Informatics / 
June 2021</address>
</body></html>
